import { z } from "zod/v4";
import type { BlockResponse } from "./block";
import { Credentials } from "./models";
/**
 * Extra context passed to tool handlers
 */
export type RequestHandlerExtra = {
    /** Authentication data if provided */
    auth?: {
        credentials: Credentials;
        provider: string;
    };
    /** Execution mode: 'headless' for non-interactive, 'interactive' for user interaction (defaults to 'headless') */
    mode: "headless" | "interactive";
};
type ToolOptions<TSchema extends Record<string, z.ZodTypeAny>, TType extends "block" | "json" = "json"> = {
    authRequirements?: {
        provider: string;
        required?: boolean;
        scopeBundle: string;
    };
    description: string;
    inputSchema: TSchema;
    type?: TType;
};
/**
 * Register a function as an Opal tool
 *
 * @example
 * ```typescript
 * const greetTool = registerTool('greet', {
 *   description: 'Greet a user',
 *   inputSchema: {
 *     name: z.string().describe('The name to greet')
 *   }
 * }, async (params) => {
 *   // params is automatically typed as { name: string }
 *   return `Hello, ${params.name}!`;
 * });
 * ```
 *
 * @example
 * ```typescript
 * // With auth and execution mode
 * const fetchTool = registerTool('fetch_data', {
 *   description: 'Fetch data from API',
 *   inputSchema: {
 *     url: z.string().describe('URL to fetch')
 *   },
 *   authRequirements: {
 *     provider: 'api-service',
 *     scopeBundle: 'read'
 *   }
 * }, async (params, extra) => {
 *   // extra.mode: 'headless' | 'interactive'
 *   // extra.auth: { provider, credentials }
 *   const headers = extra?.auth ? { Authorization: extra.auth.credentials.token } : {};
 *   return fetch(params.url, { headers });
 * });
 * ```
 */
export declare function registerTool<TSchema extends Record<string, z.ZodTypeAny>>(name: string, options: ToolOptions<TSchema, "block">, handler: (params: {
    [K in keyof TSchema]: z.infer<TSchema[K]>;
}, extra?: RequestHandlerExtra) => BlockResponse | Promise<BlockResponse>): typeof handler;
export declare function registerTool<TSchema extends Record<string, z.ZodTypeAny>>(name: string, options: Omit<ToolOptions<TSchema>, "type"> | ToolOptions<TSchema, "json">, handler: (params: {
    [K in keyof TSchema]: z.infer<TSchema[K]>;
}, extra?: RequestHandlerExtra) => Promise<unknown> | unknown): typeof handler;
export {};
